<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tab.dao.FoodMapper">
    <insert id="addFood" parameterType="Food">
      insert into food(title,description,img,article,time,uid,cid) value (#{title},#{description},#{img},#{article},#{time},#{uid},#{cid})
    </insert>
    <select id="queryAll" resultType="Category">
        select * from category
    </select>
    <select id="queryFood" resultType="Food">
        select * from  food
    </select>
    <select id="queryFoodByFid" resultType="Food">
            select * from food where fid=#{fid}
</select>
    <select id="queryUsernameByUid" resultType="String">
        select username from user where uid=#{uid}
    </select>
    <select id="queryFoodByCid" resultType="Food">
        select * from food where cid=#{cid};
    </select>
    <select id="queryFoodBysearch" resultType="Food">
        select * from food where title like concat('%',#{search},'%')
    </select>
    <select id="querycommentarysByFid" resultMap="UserCommentary">
         SELECT * FROM commentary where fid=#{fid}
    </select>
    <select id="queryFoodById" resultType="Food">
        select * from food where uid=#{uid};
    </select>
<resultMap id="UserCommentary" type="Commentary">
    <result property="cid" column="cid"></result>
    <result property="content" column="content"></result>
    <result property="time" column="time"></result>
 <association property="user" column="uid" javaType="User" select="getuser"></association>
</resultMap>
<select id="getuser" resultType="User">
    select * from user where uid=#{uid}
</select>
  <insert id="Addcommentary" parameterType="Commentary">
      insert into commentary(cid,content,time,fid,uid) value (#{cid},#{content},#{time},#{fid},#{uid})
  </insert>

</mapper>